name: ğŸ§ Automated Podcast Updater (Jekyll)

# è§¦å‘æ¡ä»¶ï¼š
on:
  # 1. æ¯å‘¨ä¸€çš„ 04:00 AM UTC è¿è¡Œä¸€æ¬¡ (ç›¸å½“äºåŒ—äº¬æ—¶é—´å‘¨ä¸€ä¸­åˆ 12:00)
  # ä½ å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´è¿™ä¸ª cron è¡¨è¾¾å¼
  schedule:
    - cron: '0 8 * * 5' 
  # 2. å…è®¸æ‰‹åŠ¨åœ¨ GitHub é¡µé¢ä¸Šç‚¹å‡»æŒ‰é’®è§¦å‘
  workflow_dispatch:

jobs:
  update_data:
    # ç¡®ä¿è¿è¡Œåœ¨ GitHub Pages é»˜è®¤çš„ Jekyll ç¯å¢ƒå…¼å®¹çš„æ“ä½œç³»ç»Ÿä¸Š
    runs-on: ubuntu-latest
    steps:
      - name: â¬‡ï¸ Checkout Repository
        uses: actions/checkout@v4
        # è®¾ç½® token æƒé™ï¼Œä»¥ä¾¿ Action å¯ä»¥æäº¤æ›´æ”¹
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: ğŸ Setup Python 3
        uses: actions/setup-python@v5
        with:
          python-version: '3.x'

      - name: âš™ï¸ Install Python dependencies
        run: pip install -r requirements.txt

      - name: ğŸƒ Run Podcast Update Script
        # è¿è¡Œæˆ‘ä»¬çš„ Python è„šæœ¬
        run: python scripts/update_podcast_collection.py

      - name: ğŸ’¾ Commit and Push changes
        # ä½¿ç”¨ stefanzweifel/git-auto-commit-action è‡ªåŠ¨æäº¤å’Œæ¨é€
        # è¿™ä¸ª Action åªæœ‰åœ¨æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šæ‰§è¡Œæäº¤
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          # åªæœ‰ä½ çš„æ•°æ®æ–‡ä»¶è¢«ä¿®æ”¹æ—¶ï¼Œæ‰éœ€è¦æäº¤
          commit_message: 'Automated: Update podcast episodes via RSS feed ğŸ§'
          # !!! ç¡®ä¿è¿™é‡Œçš„è·¯å¾„ä¸ä½ çš„æ•°æ®æ–‡ä»¶è·¯å¾„ä¸€è‡´ !!!
          file_pattern: '_data/episodes.yml' 
          commit_author: 'Ray2024Ray <goodrui86@gmail.com>'